{"version":3,"sources":["es6scripts.js"],"names":[],"mappings":"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","file":"all.js","sourcesContent":["(() => {\n\n\n\n  //string handler\n  let availabilityRequestURI = \"https://api.roomercloud.net/services/bookingapi/availability1?hotel=HLEI&channelCode=BBN&channelManagerCode=OWN&\"\n  const today = new Date()\n  const dayInMs = 86400000\n  let todayPlus400days = new Date()\n  todayPlus400days.setDate(todayPlus400days.getDate() + 50)\n\n  availabilityRequestURI += \"arrivalDate=\"   + today.getUTCFullYear() + \"-\" + (today.getUTCMonth() + 1) + \"-\" + today.getUTCDate()\n  availabilityRequestURI += \"&\"\n  availabilityRequestURI += \"departureDate=\" + todayPlus400days.getUTCFullYear() + \"-\" + (todayPlus400days.getUTCMonth() + 1) + \"-\" + todayPlus400days.getUTCDate()\n\n  let availabilityXML;\n\n  const getInventory = (inventoryID) => {\n      const inventory = availabilityXML.getElementsByTagName(\"inventoryItem\")\n      let returnItem = false\n      Array.from(inventory).forEach(item => {\n        const ID = item.getAttribute(\"inventoryCode\")\n        if(ID == inventoryID) returnItem = item\n      })\n\n      if(!returnItem) alert(\"Error getting Inventory by ID: \" + inventoryID)\n      else return returnItem\n  }\n\n  const getSinglesObject = () => {\n    const singlesInventory = getInventory(\"SGL-OBE\").getElementsByTagName(\"day\")\n    let singlesObject = {}\n    Array.from(singlesInventory).forEach(day => {\n      const date         = day.getAttribute(\"date\")\n      const availability = day.getAttribute(\"availability\")\n      const currentRate  = day.getAttribute(\"rate\")\n      singlesObject[date] = [availability, currentRate]\n    })\n    console.log(singlesObject)\n    return singlesObject\n  }\n\n  const getDoublesObject = () => {\n    const doublesInventory = getInventory(\"DBL-OBE\") .getElementsByTagName(\"day\")\n    const twinsInventory   = getInventory(\"TWIN-OBE\").getElementsByTagName(\"day\")\n    let doublesObject = {}\n    Array.from(doublesInventory).forEach(day => {\n      const date         = day.getAttribute(\"date\")\n      const availability = day.getAttribute(\"availability\")\n      const currentRate  = day.getAttribute(\"rate\")\n      doublesObject[date] = [parseInt(availability), currentRate]\n    })\n\n    Array.from(twinsInventory).forEach((day, i) => {\n      const date         = day.getAttribute(\"date\")\n      const availability = day.getAttribute(\"availability\")\n      for(let key in doublesObject) {\n         if(key == date) doublesObject[key][0] += parseInt(availability)\n      }\n    })\n    console.log(doublesObject)\n    return doublesObject\n  }\n\n  let rateParameters;\n  let singles;\n  let doubles;\n  let total;\n\n  const calculateRates = () => {\n    const rates = total.forEach(item => {\n        console.log(item)\n    })\n  }\n\n  const render = () => {\n    singles = getSinglesObject()\n    doubles = getDoublesObject()\n    total   = Object.keys(singles).map((key, index) => {\n      const s = parseInt(singles[key][0])\n      const d = parseInt(doubles[key][0])\n      return [key, s + d]\n    })\n\n    console.log(total)\n    showRatesAndAvailabilities()\n    calculateRates()\n  }\n\n  const showRatesAndAvailabilities = () => {\n    let singlesTable = Object.keys(singles).map((key) => {\n      return [key, singles[key][0], singles[key][1]]\n    })\n\n    let doublesTable = Object.keys(doubles).map((key) => {\n      return [key, doubles[key][0], doubles[key][1]]\n    })\n\n    console.log(doublesTable)\n\n    const tableElement = document.createElement(\"table\")\n    const tablerow     = document.createElement(\"tr\")\n    const singlesText   = document.createTextNode(\"singles\")\n    tablerow.appendChild(singlesText)\n    singlesTable.forEach((item, index) => {\n      const tr = document.createElement(\"tr\")\n      const tdDate            = document.createElement(\"td\")\n      const tdAvailabilitySgl = document.createElement(\"td\")\n      const tdRate            = document.createElement(\"td\")\n      const tdAvailabilityDbl = document.createElement(\"td\")\n      const availabilityDbl   = document.createTextNode(doublesTable[index][1])\n      const availabilitySgl   = document.createTextNode(item[1])\n      const date              = document.createTextNode(item[0])\n\n      tdDate           .appendChild(date)\n      tdAvailabilityDbl.appendChild(availabilityDbl)\n      tdAvailabilitySgl.appendChild(availabilitySgl)\n      tr               .appendChild(tdDate)\n      tr               .appendChild(tdAvailabilitySgl)\n      tr               .appendChild(tdAvailabilityDbl)\n      tableElement     .appendChild(tr)\n    })\n\n    document.querySelector(\"body\").appendChild(tableElement)\n  }\n\n\n\n\n\n  const loadRateParameters = () => {\n    const xml = new XMLHttpRequest()\n    xml.open('GET', 'rateSettings.json', true)\n    xml.send(null)\n    xml.onreadystatechange = () => {\n      if (xml.readyState === XMLHttpRequest.DONE && xml.status === 200) {\n        const JSONtext = xml.responseText\n        rateParameters = JSON.parse(JSONtext)\n        render()\n      }\n    }\n  }\n\n\n  ;(() => {\n    const xml = new XMLHttpRequest()\n    xml.open('GET', availabilityRequestURI, true)\n    xml.send(null)\n    xml.onreadystatechange = () => {\n      if (xml.readyState === XMLHttpRequest.DONE && xml.status === 200) {\n        const parser = new DOMParser()\n        availabilityXML = parser.parseFromString(xml.responseText, \"text/xml\")\n        console.log(availabilityXML)\n        getSinglesObject()\n        getDoublesObject()\n        loadRateParameters()\n      }\n    }\n  })();\n})()\n"]}