{"version":3,"sources":["../appES6/renderES5.js"],"names":[],"mappings":"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","file":"render.js","sourcesContent":["define((require) => {\r\n\r\n  const makeError = (message, error) => {\r\n    let str = message\r\n    if(error) str += (\" | error: \" + error)\r\n    const errorbox = document.querySelector(\".errorbox\")\r\n    errorbox.innerHTML = str \r\n  }\r\n\r\n  const removeChildren = (node) => {\r\n\r\n    const clone = node.cloneNode(false)\r\n    node.parentNode.replaceChild(clone, node)\r\n  }\r\n\r\n\r\n  const makeTableFromArray = (array, theaders) => {\r\n\r\n    const table = document.createElement(\"table\")\r\n    if(theaders != undefined) {\r\n      const headerRow = document.createElement(\"tr\")\r\n      theaders.forEach((text) => {\r\n        const textNode = document.createTextNode(text)\r\n        const td       = document.createElement(\"td\")\r\n        td       .appendChild(textNode)\r\n        headerRow.appendChild(td)\r\n        table.appendChild(headerRow)\r\n      })\r\n    }\r\n\r\n\r\n    if(array[0][0] == undefined) alert(\"Some function gave me not a table\")\r\n    array.forEach((key) => {\r\n      const tr = document.createElement(\"tr\")\r\n      key.forEach((item) => {\r\n        const td  = document.createElement(\"td\")\r\n        const txt = document.createTextNode(item)\r\n        td.appendChild(txt)\r\n        tr.appendChild(td)\r\n      })\r\n      table.appendChild(tr)\r\n    })\r\n    return table\r\n  }\r\n\r\n\r\n  const renderAvailability = (availabilities) => {\r\n\r\n    const table           = getAvailabilityTable(availabilities)\r\n    const availabilityDiv = document.querySelector(\".channelAvailability\")\r\n    availabilityDiv.appendChild(table)\r\n  }\r\n\r\n\r\n  const renderRates = (rates) => {\r\n\r\n    const tableHeaders = [\"date\", \"rates\", \"availbilities\"]\r\n    const rateTable    = makeTableFromArray(rates, tableHeaders)\r\n    const rateDiv      = document.querySelector(\".rates\")\r\n    rateDiv.appendChild(rateTable)\r\n  }\r\n\r\n\r\n  const availabilityToTableFormat = (object) => {\r\n\r\n    let array = [[\"date\"]]\r\n    let compressedObject = {}\r\n    for(let key in object) {\r\n      array[0].push(key)\r\n      for(let date in object[key]) {\r\n        compressedObject[date] = []\r\n      }\r\n    }\r\n    for(let key in object) {\r\n      for(let date in object[key]) {\r\n        compressedObject[date].push(object[key][date][0])\r\n      }\r\n    }\r\n    for(let date in compressedObject) {\r\n      let subarray = [date]\r\n      compressedObject[date].forEach(text => {\r\n        subarray.push(text)\r\n      })\r\n      array.push(subarray)\r\n    }\r\n    return array\r\n  }\r\n\r\n\r\n  const getAvailabilityTable = (availabilities) => {\r\n\r\n    const array = availabilityToTableFormat(availabilities)\r\n    return makeTableFromArray(array)\r\n  }\r\n\r\n\r\n  const appendInput = (div, text, inputType, inputName, defaultValue) => {\r\n\r\n    const input    = document.createElement(\"input\")\r\n    const br       = document.createElement(\"br\")\r\n    const textNode = document.createTextNode(text)\r\n\r\n    input.setAttribute(\"name\", inputName)\r\n    input.setAttribute(\"type\", inputType)\r\n    input.defaultValue = defaultValue\r\n    div.appendChild(textNode)\r\n    div.appendChild(input)\r\n    div.appendChild(br)\r\n  }\r\n\r\n\r\n  const createSubForm = (index, roomTypes) => {\r\n\r\n    const superDiv   = document.createElement(\"div\")\r\n    superDiv.setAttribute(\"class\", \"groupBooking booking\" + index)\r\n    appendInput(superDiv, \"date for booking \" + index, \"date\", \"date\" + index, \"2018-1-1\")\r\n    appendInput(superDiv, \"nights for booking \" + index, \"number\", \"nights\" + index, 1)\r\n    \r\n    for(let key in roomTypes) {\r\n      appendInput(\r\n        superDiv, \r\n        \"number of \" + roomTypes[key] + \" rooms\",\r\n        \"number\",\r\n        key + index,\r\n        1)\r\n    }\r\n\r\n    return superDiv\r\n  }\r\n\r\n\r\n  const createForm = (numberOfSubforms, roomTypes) => {\r\n\r\n    const form = document.createElement(\"form\")\r\n    form.setAttribute(\"class\", \"groupCalc__form\")\r\n    for(let i = 1; i <= numberOfSubforms; i++) {\r\n      const div = createSubForm(i, roomTypes)\r\n      div.setAttribute(\"class\", \"groupCalc__booking\" + i)\r\n      form.appendChild(div)\r\n    }\r\n    return form\r\n  }\r\n\r\n  const renderGroupForm = (settings) => {\r\n\r\n    const $eb = require(\"eventBinder\")\r\n    const $xmlh = require(\"xmlHelper\")\r\n    const $dm = require(\"dataManager\")\r\n    const n = document.querySelector(\"#numberOfBookings\").value\r\n    const roomTypes = $dm.getRoomTypes(settings)\r\n    const form = createForm(n, roomTypes)\r\n    removeChildren(document.querySelector(\".groupCalc__formContainer\"))\r\n    const groupCalc = document.querySelector(\".groupCalc__formContainer\")\r\n    const button    = document.createElement(\"button\")\r\n    button.setAttribute(\"class\", \"groupCalc__calculate\")\r\n    button.appendChild(document.createTextNode(\"Calculate\"))\r\n    form.appendChild(button)\r\n    groupCalc.appendChild(form)\r\n    $eb.groupFormEvent(button, form)\r\n  }\r\n\r\n\r\n  const renderGroupPrices = (prices) => {\r\n\r\n    let container = document.querySelector(\".groupCalc__formContainer\")\r\n    removeChildren(container)\r\n    const $dm = require(\"dataManager\")\r\n    prices.forEach(booking => {\r\n      const data = $dm.objectToArrayWithHeaders(booking)    \r\n      const table = makeTableFromArray(data.reverse())\r\n      let container = document.querySelector(\".groupCalc__formContainer\")\r\n      container = document.querySelector(\".groupCalc__formContainer\")\r\n      container.appendChild(table)\r\n    })\r\n  }\r\n\r\n  \r\n\r\n  return {\r\n    makeTableFromArray: makeTableFromArray,\r\n    availabilityToTableFormat: availabilityToTableFormat,\r\n    getAvailabilityTable: getAvailabilityTable,\r\n    createSubForm: createSubForm,\r\n    createForm: createForm,\r\n    renderGroupForm: renderGroupForm,\r\n    renderRates: renderRates,\r\n    renderAvailability: renderAvailability,\r\n    removeChildren: removeChildren,\r\n    renderGroupPrices: renderGroupPrices,\r\n    makeError: makeError,\r\n  }\r\n})"]}